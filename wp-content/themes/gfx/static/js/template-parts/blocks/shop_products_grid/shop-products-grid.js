!function(e){var t=e(".shop-products-grid"),n=e("#product-filtration-form"),l=e(".filter-tags-select"),i=e(".filter-bubbles"),a=e(".categories-list"),s=n.find(".all-posts-count"),r=n.find(".showing-posts-count");if(a.length){e(document).on("ready",(function(){var t=a.find(".has-children > ul > li > a");t.length&&t.each((function(){var t=e(this);if(t.hasClass("current")){var n=t.closest(".has-children").find("a").first();n.length&&n.trigger("click")}}))}));var o=a.find(".has-children > a");o.length&&o.on("click",(function(){var t=e(this),n=t.next();n.length&&(t.toggleClass("opened"),n.slideToggle(200))}))}if(e(document).ready((function(){var t=e(".custom-select.sort-by-select"),n=e(".custom-select.multiple");t.length&&t.select2({placeholder:"Sort By",minimumResultsForSearch:-1}),n.length&&(n.select2({multiple:!0,minimumResultsForSearch:-1}),n.find("option").prop("selected",!1),n.trigger("change.select2"))})),l.length){i=e(".filter-bubbles");l.on("select2:select",(function(t){var n=t.params.data.id,l=t.params.data.text;if(n.length&&l.length){var a='<div class="bubble" data-id="'+n+'">'+l+'\n                        <button class="delete-bubble">\n                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                                 version="1.1" width="512" height="512" x="0"\n                                 y="0" viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512 512"\n                                 xml:space="preserve" class="">\n                                    <path d="m512.001 84.853-84.853-84.853-171.147 171.147-171.148-171.147-84.853 84.853 171.148 171.147-171.148 171.148 84.853 84.853 171.148-171.147 171.147 171.147 84.853-84.853-171.148-171.148z"\n                                          fill="#ffffff" data-original="#000000" style="" class=""/>\n                                </svg>\n                        </button>\n                    </div>';i.length&&(i.has("div.bubble").length?e(a).insertBefore(".clear-all-filters"):(i.append(a),i.append('<button class="clear-all-filters secondary-button extra-small grey">\n                      Clear All\n                   </button>')))}})),l.on("select2:unselect",(function(e){var t=e.params.data.id,n='div.bubble[data-id="'+t+'"]';t.length&&i.length&&n.length&&i.has(n).length&&i.find(n).find("button.delete-bubble").trigger("click")}))}function c(e){var t=e.data("posts-count"),n=e.data("all-posts-count");s.length&&r.length&&(r.html(t),s.html(n))}i.length&&(i.on("click","button.delete-bubble",(function(){var t=e(this).closest(".bubble"),a=t.data("id");if(t.length)if(1===i.find(".bubble").length)i.find("button.clear-all-filters").trigger("click");else{if(t.remove(),l.length&&a){var s=l.find('option[value="'+a+'"]');s.length&&(s.prop("selected",!1),l.trigger("change.select2"))}n.trigger("submit")}})),i.on("click","button.clear-all-filters",(function(){i.empty(),l.length&&(l.find("option").prop("selected",!1),l.trigger("change.select2")),n.trigger("submit")}))),n.length&&(n.on("change",(function(){n.trigger("submit")})),n.on("submit",(function(l){l.preventDefault(),e.ajax({url:window.location.href,type:"GET",headers:{"x-filter-product":!0},data:{action:"product_form_filters",form:n.serialize()},success:function(n){var l=t.find(".ajax-content");l.length&&n&&(l.html(n),c(e(n)))}})}))),e(document).ready((function(){var e=n.find(".ajax-content");e.length&&c(e)}))}(jQuery);