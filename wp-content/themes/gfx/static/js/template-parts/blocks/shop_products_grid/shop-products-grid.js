!function(e){var t=e("#product-filtration-form"),l=e(".filter-tags-select"),n=e(".filter-bubbles"),i=e(".categories-list");if(i.length){e(document).on("ready",(function(){var t=i.find(".has-children > ul > li > a");t.length&&t.each((function(){var t=e(this);if(t.hasClass("current")){var l=t.closest(".has-children").find("a").first();l.length&&l.trigger("click")}}))}));var a=i.find(".has-children > a");a.length&&a.on("click",(function(){var t=e(this),l=t.next();l.length&&(t.toggleClass("opened"),l.slideToggle(200))}))}if(e(document).ready((function(){var t=e(".custom-select.sort-by-select"),l=e(".custom-select.multiple");t.length&&t.select2({placeholder:"Sort By",minimumResultsForSearch:-1}),l.length&&(l.select2({multiple:!0,minimumResultsForSearch:-1}),l.find("option").prop("selected",!1),l.trigger("change.select2"))})),l.length){n=e(".filter-bubbles");l.on("select2:select",(function(t){var l=t.params.data.id,i=t.params.data.text;if(l.length&&i.length){var a='<div class="bubble" data-id="'+l+'">'+i+'\n                        <button class="delete-bubble">\n                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                                 version="1.1" width="512" height="512" x="0"\n                                 y="0" viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512 512"\n                                 xml:space="preserve" class="">\n                                    <path d="m512.001 84.853-84.853-84.853-171.147 171.147-171.148-171.147-84.853 84.853 171.148 171.147-171.148 171.148 84.853 84.853 171.148-171.147 171.147 171.147 84.853-84.853-171.148-171.148z"\n                                          fill="#ffffff" data-original="#000000" style="" class=""/>\n                                </svg>\n                        </button>\n                    </div>';n.length&&(n.has("div.bubble").length?e(a).insertBefore(".clear-all-filters"):(n.append(a),n.append('<button class="clear-all-filters secondary-button extra-small grey">\n                      Clear All\n                   </button>')))}})),l.on("select2:unselect",(function(e){var t=e.params.data.id,l='div.bubble[data-id="'+t+'"]';t.length&&n.length&&l.length&&n.has(l).length&&n.find(l).find("button.delete-bubble").trigger("click")}))}n.length&&(n.on("click","button.delete-bubble",(function(){var i=e(this).closest(".bubble"),a=i.data("id");if(i.length)if(1===n.find(".bubble").length)n.find("button.clear-all-filters").trigger("click");else{if(i.remove(),l.length&&a){var r=l.find('option[value="'+a+'"]');r.length&&(r.prop("selected",!1),l.trigger("change.select2"))}t.trigger("update")}})),n.on("click","button.clear-all-filters",(function(){n.empty(),l.length&&(l.find("option").prop("selected",!1),l.trigger("change.select2")),t.trigger("update")}))),t.length&&(t.on("change",(function(){t.trigger("submit")})),t.on("submit",(function(l){l.preventDefault(),e.ajax({url:ajaxurl.url,type:"GET",data:{action:"product_form_filters",form:t.serialize()},success:function(t){var l=e(".ajax-content");l.length&&t.content&&l.html(t.content)}})})))}(jQuery);