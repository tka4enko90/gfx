!function(e){var t=e(".shop-products-grid"),n=e("#product-filtration-form"),l=e(".filter-tags-select"),i=e(".filter-bubbles"),a=e(".categories-list"),r=n.find(".all-posts-count"),s=n.find(".showing-posts-count"),o=e('.colors-holder input[type="checkbox"]');if(a.length){e(document).on("ready",(function(){var t=a.find(".has-children > ul > li > a");t.length&&t.each((function(){var t=e(this);if(t.hasClass("current")){var n=t.closest(".has-children").find("a").first();n.length&&n.trigger("click")}}))}));var c=a.find(".has-children > a");c.length&&c.on("click",(function(){var t=e(this),n=t.next();n.length&&(t.toggleClass("opened"),n.slideToggle(200))}))}if(e(document).ready((function(){var t=e(".custom-select.sort-by-select"),n=e(".custom-select.multiple");t.length&&t.select2({placeholder:"Sort By",minimumResultsForSearch:-1}),n.length&&(n.select2({multiple:!0,minimumResultsForSearch:-1}),n.find("option").prop("selected",!1),n.trigger("change.select2"))})),l.length||o.length){i=e(".filter-bubbles");function g(t,n,l=""){if("filter"==t)var a='<div class="bubble" data-id="'+l+'"><span>'+n+'\n</span>                        <button class="delete-bubble">\n                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                                 version="1.1" width="512" height="512" x="0"\n                                 y="0" viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512 512"\n                                 xml:space="preserve" class="">\n                                    <path d="m512.001 84.853-84.853-84.853-171.147 171.147-171.148-171.147-84.853 84.853 171.148 171.147-171.148 171.148 84.853 84.853 171.148-171.147 171.147 171.147 84.853-84.853-171.148-171.148z"\n                                          fill="#ffffff" data-original="#000000" style="" class=""/>\n                                </svg>\n                        </button>\n                    </div>';else a='<div class="bubble" data-color="'+n+'"><span>'+n+'\n</span>                        <button class="delete-bubble">\n                            <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"\n                                 version="1.1" width="512" height="512" x="0"\n                                 y="0" viewBox="0 0 512.001 512.001" style="enable-background:new 0 0 512 512"\n                                 xml:space="preserve" class="">\n                                    <path d="m512.001 84.853-84.853-84.853-171.147 171.147-171.148-171.147-84.853 84.853 171.148 171.147-171.148 171.148 84.853 84.853 171.148-171.147 171.147 171.147 84.853-84.853-171.148-171.148z"\n                                          fill="#ffffff" data-original="#000000" style="" class=""/>\n                                </svg>\n                        </button>\n                    </div>';i.length&&(i.has("div.bubble").length?e(a).insertBefore(".clear-all-filters"):(i.append(a),i.append('<button class="clear-all-filters secondary-button extra-small grey">Clear All</button>')))}function u(e,t){if(e&&t)if("filter"==e){var n='div.bubble[data-id="'+t+'"]';i.length&&n.length&&i.find(n).find("button.delete-bubble").trigger("click")}else{n='div.bubble[data-color="'+t+'"]';i.length&&n.length&&i.find(n).find("button.delete-bubble").trigger("click")}}l.length&&(l.on("select2:select",(function(e){var t=e.params.data.id,n=e.params.data.text;t.length&&n.length&&g("filter",n,t)})),l.on("select2:unselect",(function(e){u("filter",e.params.data.id)}))),o.length&&o.on("change",(function(t){var n=e(this),l=n.val();n.is(":checked")?l&&g("color",l):u("color",l)}))}function d(e){var t=e.data("posts-count"),n=e.data("all-posts-count");r.length&&s.length&&(s.html(t),r.html(n))}i.length&&(i.on("click","button.delete-bubble",(function(){var t=e(this).closest(".bubble"),a=t.data("id"),r=t.data("color");if(t.length)if(1===i.find(".bubble").length)i.find("button.clear-all-filters").trigger("click");else{var s;if(t.remove(),l.length&&a)(s=l.find('option[value="'+a+'"]')).length&&(s.prop("selected",!1),l.trigger("change.select2"));if(o.length&&r)(s=e('input[value="'+r+'"]')).length&&s.prop("checked",!1);n.trigger("submit")}})),i.on("click","button.clear-all-filters",(function(){i.empty(),l.length&&(l.find("option").prop("selected",!1),l.trigger("change.select2")),o.length&&o.prop("checked",!1),n.trigger("submit")}))),n.length&&(n.on("change",(function(){n.trigger("submit")})),n.on("submit",(function(l){l.preventDefault(),e.ajax({url:window.location.href,type:"GET",headers:{"x-filter-product":!0},data:{action:"product_form_filters",form:n.serialize()},success:function(n){var l=t.find(".ajax-content");l.length&&n&&(l.html(n),d(e(n)))}})}))),n.on("click",".page-numbers",(function(t){t.preventDefault();var l=e(t.currentTarget).text();e('input[name = "page"]').val(l),n.trigger("submit")})),e(document).ready((function(){var e=n.find(".ajax-content");e.length&&d(e)}))}(jQuery);