!function(a){"use strict";var _={init:function(){a(document.body).on("wc_price_based_country_manual_price_show",this.manual_price_show),a("select#product-type").on("change",this.show_and_hide_panels),a("input#_nyp").on("change",this.show_and_hide_panels),a("#woocommerce-product-data").on("change","input.variation_is_nyp",this.show_and_hide_variation_panels),a("#general_coupon_data #discount_type").on("change",this.coupon_type_change),a(document.body).ready(this.coupon_type_change),a("select.variation_actions").on("wcpbc_variable_bluck_edit_ajax_data",this.variable_bluck_edit),this.subscriptions_init(),this.bookings_init(),this.addons_init(),this.german_market_init(),this.germanized.init(),this.measurement_price_calculator.init()},show_and_hide_panels:function(){a(document.body).trigger("wc_price_based_country_show_and_hide_panels")},show_and_hide_variation_panels:function(){a(this).closest(".woocommerce_variation").find('.wcpbc_price_method[type="radio"][value="manual"]').each(function(){var e=a(this).prop("checked"),c=a(this).closest(".wcpbc_pricing");e&&_.manual_price_show(!1,c)})},manual_price_show:function(e,c){var i=a("select#product-type").val(),_=!c.find('.wcpbc_sale_price_dates[type="radio"][value="default"]').first().prop("checked"),o=wc_price_based_country_pro_admin_param.name_your_price_support&&a("input#_nyp").prop("checked"),i=wc_price_based_country_pro_admin_param.subscription_support&&("subscription"===i||"variable-subscription"===i);wc_price_based_country_pro_admin_param.name_your_price_support&&(c.closest(".woocommerce_variation").length&&(o=c.closest(".woocommerce_variation").find("input.variation_is_nyp").first().prop("checked")),c.find(".wcpbc_show_if_nyp").toggle(o),c.find(".wcpbc_show_if_manual").not(".wcpbc_show_if_nyp").toggle(!o),c.find(".wcpbc_show_if_manual.wcpbc_hide_if_sale_dates_default").not(".wcpbc_show_if_nyp").toggle(!o&&_),o?c.find(".wcpbc_input_subscription_price").prop("disabled",!0).css("background","#ccc"):c.find(".wcpbc_input_subscription_price").prop("disabled",!1).css("background","#fff")),wc_price_based_country_pro_admin_param.subscription_support&&(c.find(".wcpbc_show_if_manual_subscription").toggle(i),i&&c.find("._regular_price_wcpbc_field, ._variable_regular_price_wcpbc_field").hide(),c.find("._variable_sale_price_wcpbc_field").toggleClass("form-row-last",!i),c.find("._variable_sale_price_wcpbc_field").toggleClass("form-row-full",i))},coupon_type_change:function(){var e=a.inArray(a("#general_coupon_data #discount_type").val(),["percent","sign_up_fee_percent","recurring_percent"]);a("#general_coupon_data .options_group.wcpbc_pricing").toggle(e<0)},subscriptions_init:function(){wc_price_based_country_pro_admin_param.subscription_support&&(a(document.body).ready(this.move_subscriptions_fields),a(document.body).on("woocommerce_variations_added",this.move_subscriptions_fields),a("#woocommerce-product-data").on("woocommerce_variations_loaded",this.move_subscriptions_fields),a("#woocommerce-product-data").on("change",".wcpbc_pricing .wcpbc_input_subscription_price",function(){var e="#"+a(this).attr("id").replace("_subscription_price","_regular_price");a(e).val(a(this).val())}))},move_subscriptions_fields:function(){a("#woocommerce-product-data .wcpbc_show_if_manual_subscription").not("wcs_moved").each(function(){a(this).closest(".wcpbc_pricing").find("._variable_regular_price_wcpbc_field").before(a(this)),a(this).closest(".wcpbc_pricing").find("._regular_price_wcpbc_field").before(a(this)),a(this).addClass("wcs_moved")})},bookings_init:function(){a("#pricing_rows").on("change",".wc_booking_pricing_type select",function(e){void 0!==e.originalEvent&&_.booking_pricing_rows_change()}),a("#bookings_resources").on("change",".booking_resource_price_method",function(){var e="exchange_rate"==a(this).val()?"hidden":"visible";a(this).closest("tr").find(".booking_resource_cost").css("visibility",e)}),a("#bookings_persons").on("change",".booking_person_price_method",function(){var e="exchange_rate"==a(this).val()?"hidden":"visible";a(this).closest("tr").find(".booking_person_cost").css("visibility",e)}),a("li.wcpbc_bookings_pricing_options.wcpbc_bookings_pricing_tab.show_if_booking").insertAfter("li.bookings_pricing_options.bookings_pricing_tab.show_if_booking"),a("li.wcpbc_accommodation_bookings_rates_tab.show_if_accommodation-booking").insertAfter("li.accommodation_bookings_pricing_tab.show_if_accommodation-booking")},booking_pricing_rows_change:function(){a("#wcpbc_bookings_pricing .table_grid").hide(),a("#wcpbc_bookings_pricing .pricing_warning").show()},addons_init:function(){a("#wcpbc_product_addons_data select.wcpbc-price-method").on("change",function(){var e=a(this).closest("div.wcpbc-pao-addon"),c=a(this).val();e.toggleClass("closed","manual"!==c)}),a("#product_addons_data").on("change","select.wc-pao-addon-type-select, .wc-pao-addon-option-price-type, .wc-pao-addon-content-price input, .wc-pao-addon-adjust-price, .wc-pao-addon-adjust-price-select, .wc-pao-addon-adjust-price-value, .wc-pao-addon-min-max input",function(e){void 0===e.isTrigger&&(a("#wcpbc_product_addons_data .wc-metaboxes").hide(),a("#wcpbc-addons-update-required").show())})},german_market_init:function(){a('<div class="options_group"></div>').appendTo("#woocommerce-product-data #price_per_unit_options"),a("#woocommerce-product-data #price_per_unit_options p.form-field").appendTo("#woocommerce-product-data #price_per_unit_options .options_group"),a(".wcpbc_price_per_unit_options").appendTo("#woocommerce-product-data #price_per_unit_options")},germanized:{init:function(){a(document.body).on("woocommerce_variations_added",_.germanized.move_pricing_fields),a("#woocommerce-product-data").on("woocommerce_variations_loaded",_.germanized.move_pricing_fields),a(document.body).on("click","#_unit_price_auto",_.germanized.enable_disable_unit_price_fields),a(document).ready(function(){a("#general_product_data #_unit_price_auto").each(_.germanized.enable_disable_unit_price_fields)})},move_pricing_fields:function(){a(".woocommerce_variation.wc-metabox .variable_gzd_ts_labels").each(function(){a(this).closest(".woocommerce_variation.wc-metabox").find(".wcpbc_pricing").insertAfter(a(this))})},enable_disable_unit_price_fields:function(){a(this).is(":checked")?(a(this).closest("#general_product_data").find("._unit_price_regular_wcpbc_field input").attr("readonly","readonly"),a(this).closest("#general_product_data").find("._unit_price_sale_wcpbc_field input").attr("readonly","readonly"),_.germanized.auto_unit_price()):(a(this).closest("#general_product_data").find("._unit_price_regular_wcpbc_field input").removeAttr("readonly"),a(this).closest("#general_product_data").find("._unit_price_sale_wcpbc_field input").removeAttr("readonly"))},auto_unit_price:function(){var c=parseFloat(a("#_unit_product").val().replace(",",".")),i=parseFloat(a("#_unit_base").val().replace(",","."));isNaN(c)||isNaN(i)||a("#general_product_data ._unit_price_regular_wcpbc_field input, #general_product_data ._unit_price_sale_wcpbc_field input").each(function(){var e="#"+a(this).attr("id").replace("_unit_price","")+"_price",e=parseFloat(a(e).val().replace(",","."));isNaN(e)?a(this).val(""):(e=e/c*i,e=Math.round(100*e)/100,a(this).val(e.toString().replace(".",",")))})}},measurement_price_calculator:{init:function(){var e;0<a("._wc_measurement_price_calculator_min_price_wcpbc_field").length&&(a(document.body).on("wc_price_based_country_manual_price_show",function(e,c){var i;i=0<c.closest(".woocommerce_variation").length?_.measurement_price_calculator.is_visible(c.closest(".woocommerce_variation").find(".show_if_pricing_calculator"))&&""!==a("#_measurement_price_calculator").val():a("#_wc_measurement_price_calculator_min_price").is(":visible"),c.find("._wc_measurement_price_calculator_min_price_wcpbc_field").toggle(i)}),e=jQuery("#_wc_measurement_price_calculator_min_price").closest(".show_if_pricing_calculator")[0],new MutationObserver(_.measurement_price_calculator.observerCallback).observe(e,{attributes:!0,childList:!1,subtree:!1}))},is_visible:function(e){return void 0===e.attr("style")||e.attr("style").indexOf("none")<0},observerCallback:function(e){a.each(e,function(e,c){var i;if("style"===c.attributeName)return i=_.measurement_price_calculator.is_visible(a(c.target)),a("._wc_measurement_price_calculator_min_price_wcpbc_field").each(function(e,c){a(c).closest(".wcpbc_pricing").find('.wcpbc_price_method[type="radio"][value="manual"]').prop("checked")&&a(c).toggle(i)}),!1})}},variable_bluck_edit:function(){var e,c={action:a("select.variation_actions option:selected").data("action"),zone_id:a("select.variation_actions option:selected").data("zone-id")};switch(c.action){case"regular_price_increase":case"regular_price_decrease":case"sale_price_increase":case"sale_price_decrease":null!=(e=window.prompt(wc_price_based_country_pro_admin_param.i18n_enter_a_value_fixed_or_percent))&&(0<=e.indexOf("%")?c.value=accounting.unformat(e.replace(/\%/,""),woocommerce_admin.mon_decimal_point)+"%":c.value=accounting.unformat(e,woocommerce_admin.mon_decimal_point));break;case"regular_price":case"sale_price":null!=(e=window.prompt(wc_price_based_country_pro_admin_param.i18n_enter_a_value))&&(c.value=e)}return c}},e={init:function(){a("#woocommerce_currency_pos").closest("tr").hide(),a(".wcpbc-zone-settings #exchange_rate").closest("tr").insertAfter(a('input[name="auto_exchange_rate"]').closest("tr")),a("#exchange_rate").closest("tr").toggle("no"==a('input[name="auto_exchange_rate"]:checked').val()),a("#exchange_rate_fee").closest("tr").toggle("yes"==a('input[name="auto_exchange_rate"]:checked').val()),a("#round_after_taxes").closest("tr").toggle(""!==a('select[name="round_nearest"]').val()),a('input[name="auto_exchange_rate"]').on("click",function(){a("#exchange_rate").closest("tr").toggle("no"==a(this).val()),a("#exchange_rate_fee").closest("tr").toggle("yes"==a(this).val())}),a('select[name="round_nearest"]').on("change",function(){a("#round_after_taxes").closest("tr").toggle(""!==a(this).val())}),0<a("#wc_price_based_currency_format_preview").length&&(a("#woocommerce_currency").addClass("wc_price_based_country_preview_currency"),a('.wcpbc-zone-settings select[name="currency"]').addClass("wc_price_based_country_preview_currency"),a("#wc_price_based_currency_format").addClass("wc_price_based_country_preview_format"),a("#woocommerce_price_num_decimals").addClass("wc_price_based_country_preview_num_decimals"),a("#woocommerce_price_decimal_sep").addClass("wc_price_based_country_preview_decimal_sep"),this.price_preview()),a(".wc_price_based_country_preview_currency, .wc_price_based_country_preview_format, .wc_price_based_country_preview_num_decimals, .wc_price_based_country_preview_decimal_sep").on("change",function(){e.price_preview()}),a("select#wc_price_based_country_exchange_rate_api").on("change",this.show_if_exchange_rate),this.show_if_exchange_rate()},price_preview:function(){var e=a(".wc_price_based_country_preview_currency:first option:selected").text(),c=a(".wc_price_based_country_preview_currency:first option:selected").val(),i=(i=a(".wc_price_based_country_preview_format:first").val())||a("#wc_price_based_currency_format_preview").data("default"),_=parseInt(a(".wc_price_based_country_preview_num_decimals:first").val()),o=a(".wc_price_based_country_preview_decimal_sep:first").val(),o="99"+(0<_?o:"")+"9".repeat(_),_=e.lastIndexOf("(");-1<_&&(e=e.substr(_+1).replace(")",""),i.indexOf("[price]")<0&&(i+="[price]"),_=void 0===wc_price_based_country_pro_admin_param.alt_currency_symbols[c]?e:wc_price_based_country_pro_admin_param.alt_currency_symbols[c],i=(i=(i=(i=i.replace("[price]",o)).replace("[code]",c)).replace("[symbol]",e)).replace("[symbol-alt]",_),a("#wc_price_based_currency_format_preview").html(i))},show_if_exchange_rate:function(){var e=a("select#wc_price_based_country_exchange_rate_api").val();void 0!==e&&(a(".wcpbc_exchange_rate_option").closest("tr").hide(),a(".wcpbc_exchange_rate_option.show_if_exchange_rate_"+e).closest("tr").show())}};_.init(),e.init()}(jQuery);