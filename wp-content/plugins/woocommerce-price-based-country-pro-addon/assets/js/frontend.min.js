jQuery(document).ready(function(i){if("undefined"==typeof wc_price_based_country_pro_frontend_params)return!1;var o={products:{},refresh_addon_total:function(){if(0<i("#product-addons-total").length){var r=i("#product-addons-total").data("product-id");0<i('form.variations_form input[name="variation_id"]').length&&(r=i('form.variations_form input[name="variation_id"]').val()),void 0!==r&&void 0!==this.products[r]&&(i("#product-addons-total").data("price",this.products[r].display_price),i("#product-addons-total").data("raw-price",this.products[r].raw_price)),i(document.body).on("wc_price_based_country_after_ajax_geolocation",function(){i(".wc-price-based-country-addons-total-wrapper.loading").removeClass("loading")})}},refresh_price_per_unit:function(){i(".product.type-product").each(function(){if(void 0!==i(this).attr("id")){var r=i(this).attr("id").replace("product-","");if(void 0!==o.products[r]&&void 0!==o.products[r].price_per_unit_html){var e=i(o.products[r].price_per_unit_html);void 0!==i(this).find(".wgm-info.price-per-unit").first()&&i(this).find(".wgm-info.price-per-unit").first().html(e.html())}}})},refresh_bundled_items:function(){i(".bundle_data[data-bundle_id][data-bundle_price_data], .bundle_data[data-bundle_id][data-bundle_form_data]").each(function(){var r=i(this).data("bundle_id");void 0!==o.products[r].bundle_price_data&&(i(this).data("bundle_price_data",o.products[r].bundle_price_data),i(this).data("bundle_form_data")&&i(this).data("bundle_form_data",o.products[r].bundle_price_data),"undefined"!=typeof wc_pb_bundle_scripts&&void 0!==wc_pb_bundle_scripts[r]&&(wc_pb_bundle_scripts[r].price_data=o.products[r].bundle_price_data,wc_pb_bundle_scripts[r].update_totals()))}),i(".bundled_product div[data-bundle_id][data-product_id]").each(function(){var r=i(this).data("bundle_id"),e=i(this).data("product_id");if(void 0!==o.products[r].bundled_items[e]){var a=o.products[r].bundled_items[e];$price_html=i("<div>"+a.price_html+"</div>").find(".wcpbc-price.wcpbc-price-"+a.id+":first"),"undefined"!=typeof $price_html&&i(this).closest(".bundled_product").find(".wcpbc-price.wcpbc-price-"+a.id).html($price_html.html()).removeClass("loading"),a.variations&&(i(this).data("product_variations",a.variations),i(this).trigger("reload_product_variations"))}})},refresh_name_your_price:function(){if(i("form.cart").find(".nyp").length){var r=i("form.cart").find(".nyp"),e=r.closest(".nyp-product.product");if(e.length){var a=e.attr("id").replace("product-","");if(void 0!==o.products[a]){var c=o.products[a];void 0!==c.min_price&&"undefined"!==c.max_price&&"undefined"!==c.suggested_price&&(r.data("min-price",c.min_price),r.data("max-price",c.max_price),r.data("price",c.suggested_price),r.find("input#nyp").first().attr("value",c.price_attr),r.find(".minimum-text").length&&r.find(".minimum-text").parent().html(c.min_price_html))}}if(i("form.variations_form").length){var t=i("form.variations_form").data("product_variations");null!=t&&(i.each(t,function(r,e){void 0!==o.products[e.variation_id]&&"undefined"!==o.products[e.variation_id].suggested_price&&(t[r].display_price=o.products[e.variation_id].suggested_price,t[r].display_regular_price=o.products[e.variation_id].suggested_price,t[r].maximum_price=o.products[e.variation_id].max_price,t[r].minimum_price=o.products[e.variation_id].min_price,t[r].minimum_price_html=o.products[e.variation_id].min_price_html)}),i("form.variations_form").data("product_variations",t))}}},german_market:{get_product_id:function(r){var e=!1,a=r.attr("class").match(/ wgm-pbc-info-\d+/i);if(0<a.length)e=a[0].replace(" wgm-pbc-info-","");return e},refresh:function(){i(".wgm-pbc-info.price-per-unit").each(function(){var r=o.german_market.get_product_id(i(this));if(void 0!==o.products[r]&&void 0!==o.products[r].price_per_unit_html){var e=i(o.products[r].price_per_unit_html);i(this).html(e.html())}}),i(".wgm-pbc-info.woocommerce-de_price_taxrate").each(function(){var r=o.german_market.get_product_id(i(this));if(void 0!==o.products[r]&&void 0!==o.products[r].text_including_tax){var e=i(o.products[r].text_including_tax);i(this).html(e.html())}})}},germanized:{refresh:function(){if(i(".wcpbc-gzd-price-unit").length&&(i.each(o.products,function(r,e){var a;void 0!==e.unit_price_html&&e.unit_price_html&&i(".wcpbc-gzd-price-unit-"+e.id).length&&(a=i("<div>"+e.unit_price_html+"</div>").find(".wcpbc-gzd-price-unit-"+e.id+":first"),i(".wcpbc-gzd-price-unit-"+e.id).html(a.html()))}),i("form.variations_form").length)){var a=i("form.variations_form").data("product_variations");null!=a&&(i.each(a,function(r,e){void 0!==o.products[e.variation_id]&&void 0!==o.products[e.variation_id].unit_price_html&&(a[r].unit_price=o.products[e.variation_id].unit_price_html)}),i("form.variations_form").data("product_variations",a))}}},refresh_measurement_price_calculator:function(){if("undefined"!=typeof wc_price_calculator_params){wc_price_calculator_params.woocommerce_currency_symbol=o.currency_params.symbol,wc_price_calculator_params.woocommerce_price_decimal_sep=o.currency_params.decimal_sep,wc_price_calculator_params.woocommerce_price_num_decimals=o.currency_params.num_decimals,wc_price_calculator_params.woocommerce_price_thousand_sep=o.currency_params.thousand_sep;var r="undefined"!==wc_price_calculator_params.product_id&&wc_price_calculator_params.product_id;if(r&&void 0!==o.products[r]&&(wc_price_calculator_params.product_price=o.products[r].display_price,void 0!==wc_price_calculator_params.minimum_price&&void 0!==o.products[r].measurement_min_price&&(wc_price_calculator_params.minimum_price=o.products[r].measurement_min_price),void 0!==o.products[r].measurement_pricing_rules&&(wc_price_calculator_params.pricing_rules=o.products[r].measurement_pricing_rules),i("form.variations_form").length)){var a=i("form.variations_form").data("product_variations");null!=a&&(i.each(a,function(r,e){void 0!==o.products[e.variation_id]&&"undefined"!==o.products[e.variation_id].measurement_min_price&&(a[r].price=o.products[e.variation_id].display_price,a[r].minimum_price=o.products[e.variation_id].measurement_min_price)}),i("form.variations_form").data("product_variations",a))}i("form.cart").triggerHandler("wc-measurement-price-calculator-update")}},refresh_name_your_price_currency:function(){if(i('label[for="nyp"]').length){var r=i('label[for="nyp"]').html().replace(wc_price_based_country_pro_frontend_params.currency_format_symbol,o.currency_params.symbol);i('label[for="nyp"]').html(r)}"undefined"!=typeof woocommerce_nyp_params&&(woocommerce_nyp_params.currency_format_symbol=o.currency_params.symbol,woocommerce_nyp_params.currency_format_num_decimals=o.currency_params.num_decimals,woocommerce_nyp_params.currency_format_decimal_sep=o.currency_params.decimal_sep,woocommerce_nyp_params.currency_format_thousand_sep=o.currency_params.thousand_sep,woocommerce_nyp_params.currency_format=o.currency_params.format)},refresh_addons_currency:function(){"undefined"!=typeof woocommerce_addons_params&&(woocommerce_addons_params.currency_format_num_decimals=o.currency_params.num_decimals,woocommerce_addons_params.currency_format_symbol=o.currency_params.symbol,woocommerce_addons_params.currency_format_decimal_sep=o.currency_params.decimal_sep,woocommerce_addons_params.currency_format_thousand_sep=o.currency_params.thousand_sep,woocommerce_addons_params.currency_format=o.currency_params.format,i(".cart:not(.cart_group)").trigger("woocommerce-product-addons-update"))},refresh_bundled_currency:function(){"undefined"!=typeof wc_bundle_params&&i(".bundle_form .bundle_data").length&&(wc_bundle_params.currency_format_decimal_sep=o.currency_params.decimal_sep,wc_bundle_params.currency_symbol=o.currency_params.symbol,wc_bundle_params.currency_format_num_decimals=o.currency_params.num_decimals,i(".bundle_form .bundle_data").trigger("woocommerce-product-bundle-update-totals",!0))},bundle_wcsatt:{init:function(){0<i(".bundle_form .bundle_data").length&&0<i(".wcsatt-options-wrapper").length&&(i(".bundle_form .bundle_data").each(function(){i(this).on("woocommerce-product-bundle-initializing",function(r,e){void 0!==o.bundle_wcsatt.bundle_obj||e.is_composited()||(o.bundle_wcsatt.bundle_obj=e)})}),i(document.body).on("wc_price_based_country_after_ajax_geolocation",function(){void 0!==o.bundle_wcsatt.bundle_obj&&o.bundle_wcsatt.bundle_obj.$bundle_data.trigger("woocommerce-product-bundle-initializing",[o.bundle_wcsatt.bundle_obj])}))}},refresh_msrp:function(){if(0<i(".woocommerce_msrp").length&&(i(".woocommerce_msrp").each(function(){var r=o.find_product_id(this);r&&o.products[r]&&o.products[r].msrp_html&&i(this).replaceWith(o.products[r].msrp_html)}),i("form.variations_form").length)){var c=i("form.variations_form").data("product_variations");null!=c&&(i.each(c,function(r,e){if(void 0!==o.products[e.variation_id]&&void 0!==o.products[e.variation_id].mrsp_variation){var a=o.products[e.variation_id].mrsp_variation;c[r].msrp=a.msrp,c[r].msrp_html=a.msrp_html,c[r].non_msrp_price=a.non_msrp_price,c[r].msrp_saving=a.msrp_saving}}),i("form.variations_form").data("product_variations",c))}},find_product_id:function(r){var e=!1,a=i(r).closest(".type-product");if(a){var c=a.attr("class").match(/ post-\d+/i);if(0<c.length)e=c[0].replace(" post-","")}return e},init:function(){i(document.body).on("wc_price_based_country_set_product_price",function(r,e){void 0!==e&&(o.products=e,o.refresh_addon_total(),o.refresh_price_per_unit(),o.refresh_bundled_items(),o.refresh_name_your_price(),o.german_market.refresh(),o.germanized.refresh(),o.refresh_msrp())}),i(document.body).on("wc_price_based_country_set_currency_params",function(r,e){void 0!==e&&(o.currency_params=e,o.refresh_name_your_price_currency(),o.refresh_addons_currency(),o.refresh_bundled_currency(),o.refresh_measurement_price_calculator(),wc_price_based_country_pro_frontend_params.currency_format_symbol=e.symbol,wc_price_based_country_pro_frontend_params.currency_format_num_decimals=e.num_decimals,wc_price_based_country_pro_frontend_params.currency_format_decimal_sep=e.decimal_sep,wc_price_based_country_pro_frontend_params.currency_format_thousand_sep=e.thousand_sep,wc_price_based_country_pro_frontend_params.currency_format=e.format)}),i(document.body).on("wc_price_based_country_after_ajax_geolocation",function(r,e){var a=e?"content-"+e:"no-zone";i(".wcpbc-content").hide(),i(".wcpbc-content."+a).show(),i(".wcpbc-content").addClass("refreshed"),0<i(".wc-pao-addon-image-swatch").length&&i(".wc-pao-addon-image-swatch").tipTip({delay:200})}),o.bundle_wcsatt.init()}};o.init()});