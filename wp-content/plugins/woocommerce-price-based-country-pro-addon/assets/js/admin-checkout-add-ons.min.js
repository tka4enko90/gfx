!function(c){"use strict";var n,t;"undefined"!=typeof wcpbc_checkout_add_ons_param&&(n={init:function(){c(".options_group.wcpbc_pricing table.wcpbc-checkout-add-ons-option-fields tbody").each(function(){var a=c(this).data("zone_id");if(void 0!==wcpbc_checkout_add_ons_param.add_on[a]&&void 0!==wcpbc_checkout_add_ons_param.add_on[a].options)if(Array.isArray(wcpbc_checkout_add_ons_param.add_on[a].options))wcpbc_checkout_add_ons_param.add_on[a].options.forEach(function(t,o){n.setOptionData(o,a,t.adjustment)});else for(var t in wcpbc_checkout_add_ons_param.add_on[a].options)n.setOptionData(t,a,wcpbc_checkout_add_ons_param.add_on[a].options[t].adjustment)})},setOptionData:function(t,o,a){t=c('.checkout-add-ons-options table tr input.price-adjustment[name="options['+t+'][adjustment]"]');t.length&&t.data("wcpbcPrice_"+o,a)},getRows:function(){var o=[];return c(".checkout-add-ons-options table tr input.price-adjustment").each(function(){var t={id:c(this).attr("name").replace("options[","").replace("][adjustment]",""),label:c(this).closest("tr").find("td.checkout-add-on-option-label input").val(),type:c(this).closest("tr").find("select.price-adjustment-type").val(),that:c(this)};c.isNumeric(t.id)&&"fixed"===t.type&&o.push(t)}),o},sync:function(){var t=this.getRows();c(".options_group.wcpbc_pricing table.wcpbc-checkout-add-ons-option-fields tbody").each(function(){var a=c(this);a.empty(),t.forEach(function(t){var o={id:t.id,label:t.label,zone_id:a.data("zone_id"),value:""};void 0!==t.that.data("wcpbcPrice_"+o.zone_id)&&(o.value=t.that.data("wcpbcPrice_"+o.zone_id));t=wp.template("wcpbc-checkout-add-ons-option")(o);a.append(t)})})},afterUpdateOption:function(){var t=c(this).closest("tr").data("optionId"),o=c(this).closest("tbody").data("zone_id");n.setOptionData(t,o,c(this).val())}},t=function(){var t=c("#type").val(),t=-1<c.inArray(t,wcpbc_checkout_add_ons_param.types_with_options),t=(c("p._wcpbc_adjustment_field").toggle(!t),c("div.wrapper-wcpbc-checkout-add-ons-option-fields").toggle(t),!t&&"fixed"!==c('select[name="adjustment_type"]').val()||t&&!n.getRows().length);c(".options_group.wcpbc_pricing").toggle(!t),c("#wcpbc-checkout-add-ons-no-fixed-alert").toggle(t)},c(document).ready(function(){n.init(),c(".wc-tab.zone_pricing_tab a").on("click",function(){t(),n.sync()}),c(".wcpbc-checkout-add-ons-option-fields").on("change",".wcpbc-checkout-add-ons-option-price-adjustment",n.afterUpdateOption)}))}(jQuery);