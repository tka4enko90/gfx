!function(n){"use strict";if("undefined"!=typeof wcpbc_checkout_add_ons_param){var c={init:function(){n(".options_group.wcpbc_pricing table.wcpbc-checkout-add-ons-option-fields tbody").each(function(){var a=n(this).data("zone_id");if(void 0!==wcpbc_checkout_add_ons_param.add_on[a]&&void 0!==wcpbc_checkout_add_ons_param.add_on[a].options)if(Array.isArray(wcpbc_checkout_add_ons_param.add_on[a].options))wcpbc_checkout_add_ons_param.add_on[a].options.forEach(function(t,o){c.setOptionData(o,a,t.adjustment)});else for(var t in wcpbc_checkout_add_ons_param.add_on[a].options)c.setOptionData(t,a,wcpbc_checkout_add_ons_param.add_on[a].options[t].adjustment)})},setOptionData:function(t,o,a){var c=n('.checkout-add-ons-options table tr input.price-adjustment[name="options['+t+'][adjustment]"]');c.length&&c.data("wcpbcPrice_"+o,a)},getRows:function(){var o=[];return n(".checkout-add-ons-options table tr input.price-adjustment").each(function(){var t={id:n(this).attr("name").replace("options[","").replace("][adjustment]",""),label:n(this).closest("tr").find("td.checkout-add-on-option-label input").val(),type:n(this).closest("tr").find("select.price-adjustment-type").val(),that:n(this)};n.isNumeric(t.id)&&"fixed"===t.type&&o.push(t)}),o},sync:function(){var t=this.getRows();n(".options_group.wcpbc_pricing table.wcpbc-checkout-add-ons-option-fields tbody").each(function(){var c=n(this);c.empty(),t.forEach(function(t){var o={id:t.id,label:t.label,zone_id:c.data("zone_id"),value:""};void 0!==t.that.data("wcpbcPrice_"+o.zone_id)&&(o.value=t.that.data("wcpbcPrice_"+o.zone_id));var a=wp.template("wcpbc-checkout-add-ons-option")(o);c.append(a)})})},afterUpdateOption:function(){var t=n(this).closest("tr").data("optionId"),o=n(this).closest("tbody").data("zone_id");c.setOptionData(t,o,n(this).val())}},t=function(){var t=n("#type").val(),o=-1<n.inArray(t,wcpbc_checkout_add_ons_param.types_with_options);n("p._wcpbc_adjustment_field").toggle(!o),n("div.wrapper-wcpbc-checkout-add-ons-option-fields").toggle(o);var a=!o&&"fixed"!==n('select[name="adjustment_type"]').val()||o&&!c.getRows().length;n(".options_group.wcpbc_pricing").toggle(!a),n("#wcpbc-checkout-add-ons-no-fixed-alert").toggle(a)};n(document).ready(function(){c.init(),n(".wc-tab.zone_pricing_tab a").on("click",function(){t(),c.sync()}),n(".wcpbc-checkout-add-ons-option-fields").on("change",".wcpbc-checkout-add-ons-option-price-adjustment",c.afterUpdateOption)})}}(jQuery);